import{r as c,V as Ae,Y as Ie,a1 as Ue,_ as Me,a2 as ze,a3 as Ve,a4 as Ee,a5 as We,j as e,H,s as $,k as He,U as $e,m as Ye,a6 as Qe,O as Ze,Z as _e,F as Y,a7 as de,z as oe,J as Ge,a8 as Je,a9 as Ke}from"./vendor-react-DTfwnz2i.js";import{N as Xe,A as S,a as P,S as xe}from"./Navigation-DYALYri8.js";import{B as t,C as h,f as u,a as n}from"./badge-Bk34XC_J.js";import{I as Q}from"./input-BMLotNza.js";import{T as es,a as ss,b as Z,c as _}from"./tabs-V_RvRFQ7.js";import{D,a as rs,b as O,c as q,d as F,e as L,f as G}from"./dialog-BD2p6u1S.js";import{L as g}from"./label-qGWvcckI.js";import{T as is}from"./textarea-C2mIUScX.js";import{S as T,a as R,b as B,c as A,d as l}from"./select-DrUTnnsr.js";import{S as he}from"./switch-CQzVRe0S.js";import{b as as,s as I,w as ue}from"./index-BR7N1bNZ.js";import{t as o}from"./vendor-ui-9zUGSSqf.js";import{S as J}from"./separator-Bu3GtbjQ.js";import"./vendor-Cgdd8BZB.js";function vs({onNavigate:f}){const me=()=>{f("landing")},{user:d,wallet:C,refreshWallet:fe}=as(),[je,ge]=c.useState("discover"),[N,pe]=c.useState(""),[m,Ne]=c.useState([]),[v,ve]=c.useState([]),[ye,K]=c.useState(!0),[X,ee]=c.useState(!1),[we,y]=c.useState(!1),[Ce,b]=c.useState(!1),[x,se]=c.useState(null),[re,ie]=c.useState(!1),[U,be]=c.useState(!1),[ke,M]=c.useState(!1),[z,Se]=c.useState(null),[Pe,V]=c.useState(!1),[a,De]=c.useState(null),[i,j]=c.useState({skillOffered:"",skillWanted:"",description:"",duration:"",location:"",isPaid:!1,price:"",certificateRequired:!1,certificateUrl:""});c.useEffect(()=>{k()},[]),c.useEffect(()=>{d&&Oe()},[d,m]);const k=async()=>{try{K(!0);const s=await I.getAllSkills();Ne(s.skills||[])}catch(s){console.error("Error loading skill offerings:",s),o.error("Failed to load skill offerings")}finally{K(!1)}},Oe=()=>{if(!d)return;const s=m.filter(r=>r.offeredBy===d.id);ve(s)},qe=async()=>{if(!d){o.error("Please log in to create skill offers");return}if(!i.skillOffered||!i.description){o.error("Please fill in all required fields");return}if(!i.isPaid&&!i.skillWanted){o.error("Please specify a skill you want to learn for a free swap.");return}if(i.isPaid){const s=parseFloat(i.price);if(isNaN(s)||s<=0){o.error("Please enter a valid price for your paid teaching offer.");return}if(i.certificateRequired&&!i.certificateUrl){o.error("Please provide a certificate URL if certificate is required.");return}}try{ee(!0);const s={title:i.isPaid?`${i.skillOffered} (Paid Teaching)`:`${i.skillOffered} ↔ ${i.skillWanted}`,description:i.description,category:i.skillOffered,offeredBy:d.id,lookingFor:i.isPaid?"Paid Teaching":i.skillWanted,duration:i.duration||"Flexible",location:i.location||"Online",isPaid:i.isPaid,price:i.isPaid?parseFloat(i.price):null,certificateRequired:i.isPaid?i.certificateRequired:!1,certificateUrl:i.isPaid?i.certificateUrl:null};(i.isPaid?await I.createPaidSkillOffering(s):await I.createSkillOffering(s)).success&&(o.success("Skill swap offer created successfully!"),y(!1),j({skillOffered:"",skillWanted:"",description:"",duration:"",location:"",isPaid:!1,price:"",certificateRequired:!1,certificateUrl:""}),await k())}catch(s){console.error("Error creating skill offer:",s),o.error("Failed to create skill offer")}finally{ee(!1)}},ae=async s=>{if(!d){o.error("Please log in to connect with other users");return}try{(await I.requestSkillSwap(s,{requesterId:d.id,message:"I'm interested in this skill swap opportunity!",offerInReturn:"My skills and experience"})).success&&(o.success("Connection request sent successfully!"),await k())}catch(r){console.error("Error sending connection request:",r),o.error("Failed to send connection request")}},le=s=>{if(!d){o.error("Please log in to purchase skills");return}if(d.id===s.offeredBy){o.error("You cannot purchase your own skill offer.");return}se(s),b(!0)},Fe=async()=>{if(!d||!x||!x.price){o.error("Invalid purchase request.");return}if(!C||C.money<x.price){o.error("Insufficient funds in your wallet. Please top up.");return}try{ie(!0),await ue.updateBalance(d.id,"money",x.price,"subtract",`Purchase of ${x.title}`),await ue.updateBalance(x.offeredBy,"money",x.price,"add",`Sale of ${x.title}`),o.success(`Successfully purchased "${x.title}" for ${x.price} TND!`),b(!1),se(null),await fe(),await k()}catch(s){console.error("Error confirming purchase:",s),o.error("Failed to complete purchase.")}finally{ie(!1)}},Le=[{name:"Programming",icon:Ae,count:m.filter(s=>s.category==="Programming").length,color:"bg-blue-500"},{name:"Design",icon:Ie,count:m.filter(s=>s.category==="Design").length,color:"bg-purple-500"},{name:"Languages",icon:Ue,count:m.filter(s=>s.category==="Languages").length,color:"bg-green-500"},{name:"Photography",icon:Me,count:m.filter(s=>s.category==="Photography").length,color:"bg-yellow-500"},{name:"Music",icon:ze,count:m.filter(s=>s.category==="Music").length,color:"bg-pink-500"},{name:"Cooking",icon:Ve,count:m.filter(s=>s.category==="Cooking").length,color:"bg-orange-500"},{name:"Tutoring",icon:Ee,count:m.filter(s=>s.category==="Tutoring").length,color:"bg-indigo-500"},{name:"Handcraft",icon:We,count:m.filter(s=>s.category==="Handcraft").length,color:"bg-gray-500"}],E=(()=>{let s=m;if(N&&(s=s.filter(r=>r.title.toLowerCase().includes(N.toLowerCase())||r.description.toLowerCase().includes(N.toLowerCase())||r.category.toLowerCase().includes(N.toLowerCase())||r.lookingFor?.toLowerCase().includes(N.toLowerCase()))),U&&d?.skills&&d.skills.length>0){const r=d.skills.map(p=>p.toLowerCase());s=s.sort((p,te)=>{const ne=r.some(w=>p.lookingFor?.toLowerCase().includes(w)||p.category.toLowerCase().includes(w)),ce=r.some(w=>te.lookingFor?.toLowerCase().includes(w)||te.category.toLowerCase().includes(w));return ne&&!ce?-1:!ne&&ce?1:0})}return s})(),Te=v.filter(s=>s.status==="available").length,Re=v.reduce((s,r)=>s+r.matches.length,0),Be=C?.credits||0,W=s=>{switch(s){case"active":return"text-green-500 bg-green-500/10";case"matched":return"text-blue-500 bg-blue-500/10";case"pending":return"text-yellow-500 bg-yellow-500/10";default:return"text-gray-500 bg-gray-500/10"}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Xe,{currentPage:"skillswap",onNavigate:f,onLogout:me}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl mb-2",children:"Skill Swap"}),e.jsx("p",{className:"text-muted-foreground",children:"Exchange your skills with others in the community"})]}),e.jsxs(D,{open:we,onOpenChange:y,children:[e.jsx(rs,{asChild:!0,children:e.jsxs(t,{className:"gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"Create Swap Offer"]})}),e.jsxs(O,{className:"max-w-2xl",children:[e.jsxs(q,{children:[e.jsx(F,{children:"Create a Skill Swap Offer"}),e.jsx(L,{children:"Tell us what you can offer and what you're looking for"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{htmlFor:"is-paid",children:"Offer as Paid Teaching?"}),e.jsx(he,{id:"is-paid",checked:i.isPaid,onCheckedChange:s=>j(r=>({...r,isPaid:s,skillWanted:s?"Paid Teaching":""}))})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"skill-offered",children:"Skill I Can Offer"}),e.jsxs(T,{value:i.skillOffered,onValueChange:s=>j(r=>({...r,skillOffered:s})),children:[e.jsx(R,{children:e.jsx(B,{placeholder:"Select your skill"})}),e.jsxs(A,{children:[e.jsx(l,{value:"Programming",children:"Programming"}),e.jsx(l,{value:"Design",children:"Design"}),e.jsx(l,{value:"Languages",children:"Languages"}),e.jsx(l,{value:"Photography",children:"Photography"}),e.jsx(l,{value:"Music",children:"Music"}),e.jsx(l,{value:"Cooking",children:"Cooking"}),e.jsx(l,{value:"Tutoring",children:"Tutoring"}),e.jsx(l,{value:"Handcraft",children:"Handcraft"})]})]})]}),!i.isPaid&&e.jsxs("div",{children:[e.jsx(g,{htmlFor:"skill-wanted",children:"Skill I Want to Learn"}),e.jsxs(T,{value:i.skillWanted,onValueChange:s=>j(r=>({...r,skillWanted:s})),children:[e.jsx(R,{children:e.jsx(B,{placeholder:"Select desired skill"})}),e.jsxs(A,{children:[e.jsx(l,{value:"Programming",children:"Programming"}),e.jsx(l,{value:"Design",children:"Design"}),e.jsx(l,{value:"Languages",children:"Languages"}),e.jsx(l,{value:"Photography",children:"Photography"}),e.jsx(l,{value:"Music",children:"Music"}),e.jsx(l,{value:"Cooking",children:"Cooking"}),e.jsx(l,{value:"Tutoring",children:"Tutoring"}),e.jsx(l,{value:"Handcraft",children:"Handcraft"})]})]})]}),i.isPaid&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"price",children:"Price per Session (TND)"}),e.jsx(Q,{id:"price",type:"number",placeholder:"e.g., 50",value:i.price,onChange:s=>j(r=>({...r,price:s.target.value}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{htmlFor:"certificate-required",children:"Certificate Required?"}),e.jsx(he,{id:"certificate-required",checked:i.certificateRequired,onCheckedChange:s=>j(r=>({...r,certificateRequired:s}))})]}),i.certificateRequired&&e.jsxs("div",{children:[e.jsx(g,{htmlFor:"certificate-url",children:"Certificate URL"}),e.jsx(Q,{id:"certificate-url",placeholder:"Link to your certificate (e.g., Google Drive, LinkedIn)",value:i.certificateUrl,onChange:s=>j(r=>({...r,certificateUrl:s.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"description",children:"Description & Experience"}),e.jsx(is,{id:"description",placeholder:"Describe your skill level, experience, and what you can teach...",rows:4,value:i.description,onChange:s=>j(r=>({...r,description:s.target.value}))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"duration",children:"Session Duration"}),e.jsxs(T,{value:i.duration,onValueChange:s=>j(r=>({...r,duration:s})),children:[e.jsx(R,{children:e.jsx(B,{placeholder:"Select duration"})}),e.jsxs(A,{children:[e.jsx(l,{value:"30 minutes",children:"30 minutes"}),e.jsx(l,{value:"1 hour",children:"1 hour"}),e.jsx(l,{value:"2 hours",children:"2 hours"}),e.jsx(l,{value:"Flexible",children:"Flexible"})]})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"location",children:"Preferred Location"}),e.jsxs(T,{value:i.location,onValueChange:s=>j(r=>({...r,location:s})),children:[e.jsx(R,{children:e.jsx(B,{placeholder:"Select location"})}),e.jsxs(A,{children:[e.jsx(l,{value:"Online",children:"Online"}),e.jsx(l,{value:"Tunis",children:"Tunis"}),e.jsx(l,{value:"Sfax",children:"Sfax"}),e.jsx(l,{value:"Sousse",children:"Sousse"}),e.jsx(l,{value:"Flexible",children:"Flexible"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(t,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsxs(t,{onClick:qe,disabled:X,children:[X&&e.jsx($,{className:"h-4 w-4 mr-2 animate-spin"}),"Create Offer"]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(h,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Swaps"}),e.jsx("p",{className:"text-xl",children:Te})]})]})})}),e.jsx(h,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Available Offers"}),e.jsx("p",{className:"text-xl",children:m.length})]})]})})}),e.jsx(h,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-5 w-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Skill Credits"}),e.jsx("p",{className:"text-xl",children:Be})]})]})})}),e.jsx(h,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5 text-pink-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Requests"}),e.jsx("p",{className:"text-xl",children:Re})]})]})})})]}),e.jsxs(es,{value:je,onValueChange:s=>ge(s),children:[e.jsxs(ss,{children:[e.jsx(Z,{value:"discover",children:"Discover Swaps"}),e.jsx(Z,{value:"my-offers",children:"My Offers"}),e.jsx(Z,{value:"matches",children:"Matches"})]}),e.jsxs(_,{value:"discover",className:"space-y-6",children:[e.jsx(h,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Q,{placeholder:"Search skills to learn or teach...",value:N,onChange:s=>pe(s.target.value),className:"pl-10"})]}),e.jsxs(t,{variant:U?"default":"outline",onClick:()=>be(!U),children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"AI Match"]})]})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg mb-4",children:"Browse by Category"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3",children:Le.map((s,r)=>{const p=s.icon;return e.jsx(h,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs(u,{className:"p-3 text-center",children:[e.jsx("div",{className:`${s.color} text-white p-2 rounded-lg w-fit mx-auto mb-2`,children:e.jsx(p,{className:"h-4 w-4"})}),e.jsx("p",{className:"text-xs font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.count})]})},r)})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg",children:"Available Skill Swaps & Paid Teaching"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[E.length," offers available"]})]}),ye?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx($,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading skill swaps..."})]}):E.length===0?e.jsx(h,{children:e.jsxs(u,{className:"p-8 text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No skill swaps or paid teaching offers available at the moment."}),e.jsx(t,{className:"mt-4",onClick:()=>y(!0),children:"Create the first offer"})]})}):E.map(s=>e.jsx(h,{className:"hover:shadow-md transition-shadow",children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(S,{className:"h-12 w-12 cursor-pointer",onClick:()=>f("publicProfile",s.offeredBy),children:e.jsx(P,{children:s.offeredBy.substring(0,2).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h3",{className:"text-lg cursor-pointer hover:underline",onClick:()=>f("publicProfile",s.offeredBy),children:["User ",s.offeredBy.substring(0,8)]}),e.jsx(n,{variant:"secondary",className:"text-xs",children:s.status}),s.isPaid&&e.jsxs(n,{className:"bg-green-500/10 text-green-500 text-xs gap-1",children:[e.jsx(Y,{className:"h-3 w-3"})," Paid Teaching"]})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs(n,{variant:"outline",className:"gap-1",children:[e.jsx(de,{className:"h-3 w-3"}),s.category," ",s.isPaid?"":`↔ ${s.lookingFor}`]}),e.jsx(n,{className:"text-blue-500 bg-blue-500/10",children:s.duration}),s.certificateRequired&&e.jsxs(n,{className:"bg-yellow-500/10 text-yellow-500 text-xs gap-1",children:[e.jsx(oe,{className:"h-3 w-3"})," Certified"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ge,{className:"h-3 w-3"}),s.duration]}),e.jsxs("span",{children:[s.matches.length," requests"]}),e.jsxs("span",{children:["Created ",new Date(s.createdAt).toLocaleDateString()]})]})]}),e.jsx("div",{className:"flex flex-col gap-2",children:s.offeredBy===d?.id?e.jsx(n,{variant:"outline",children:"Your Offer"}):e.jsxs(e.Fragment,{children:[s.isPaid?e.jsxs(t,{size:"sm",onClick:()=>le(s),children:["Buy for ",s.price," TND"]}):e.jsx(t,{size:"sm",onClick:()=>ae(s.id),children:"Connect"}),e.jsx(t,{size:"sm",variant:"outline",onClick:()=>{De(s),V(!0)},children:"View Details"})]})})]})})},s.id))]})]}),e.jsx(_,{value:"my-offers",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg",children:"My Skill Swap Offers & Paid Teaching"}),e.jsxs(t,{size:"sm",onClick:()=>y(!0),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Create New Offer"]})]}),v.length===0?e.jsx(h,{children:e.jsxs(u,{className:"p-8 text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't created any skill swap or paid teaching offers yet."}),e.jsxs(t,{onClick:()=>y(!0),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Create Your First Offer"]})]})}):v.map(s=>e.jsx(h,{children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(n,{variant:"outline",className:"gap-1",children:[e.jsx(de,{className:"h-3 w-3"}),s.category," ",s.isPaid?"":`↔ ${s.lookingFor}`]}),e.jsx(n,{className:W(s.status),children:s.status}),s.isPaid&&e.jsxs(n,{className:"bg-green-500/10 text-green-500 text-xs gap-1",children:[e.jsx(Y,{className:"h-3 w-3"})," Paid Teaching"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Requests"}),e.jsx("p",{className:"text-lg",children:s.matches.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Duration"}),e.jsx("p",{className:"text-lg",children:s.duration})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Created"}),e.jsx("p",{className:"text-sm",children:new Date(s.createdAt).toLocaleDateString()})]})]}),s.isPaid&&e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx(Y,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.price," TND"]}),s.certificateRequired&&e.jsxs(n,{className:"bg-yellow-500/10 text-yellow-500 text-xs gap-1",children:[e.jsx(oe,{className:"h-3 w-3"})," Certified"]}),s.certificateUrl&&e.jsxs(t,{variant:"link",size:"sm",className:"h-auto p-0 text-xs",children:[e.jsx(Je,{className:"h-3 w-3 mr-1"})," View Certificate"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{size:"sm",variant:"outline",children:"Edit"}),e.jsxs(t,{size:"sm",onClick:()=>{Se(s),M(!0)},children:["View Requests (",s.matches.length,")"]})]})]})})},s.id))]})}),e.jsx(_,{value:"matches",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg",children:"Skill Swap Requests"}),v.filter(s=>s.matches.length>0).length===0?e.jsx(h,{children:e.jsxs(u,{className:"p-8 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"No requests for your skill offers yet."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Create more offers or promote your existing ones to get requests!"})]})}):v.filter(s=>s.matches.length>0).map(s=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"text-md",children:["Requests for: ",s.title]}),s.matches.map((r,p)=>e.jsx(h,{children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(S,{className:"h-12 w-12 cursor-pointer",onClick:()=>f("publicProfile",r.requesterId),children:e.jsx(P,{children:r.requesterId.substring(0,2).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h3",{className:"text-lg cursor-pointer hover:underline",onClick:()=>f("publicProfile",r.requesterId),children:["User ",r.requesterId.substring(0,8)]}),e.jsx(n,{className:W(r.status),children:r.status})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:r.message}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Requested ",new Date(r.requestedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[r.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(t,{size:"sm",variant:"outline",children:"Decline"}),e.jsx(t,{size:"sm",children:"Accept"})]}),r.status==="accepted"&&e.jsx(t,{size:"sm",children:"Start Chat"}),r.status==="declined"&&e.jsx(n,{variant:"secondary",children:"Declined"})]})]})})},p))]},s.id))]})})]}),e.jsx(D,{open:Ce,onOpenChange:b,children:e.jsxs(O,{className:"max-w-md",children:[e.jsxs(q,{children:[e.jsxs(F,{children:["Confirm Purchase: ",x?.title]}),e.jsx(L,{children:"You are about to purchase this teaching offer."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm",children:"Offer Details:"}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{children:"Skill:"}),e.jsx("span",{children:x?.category})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Price:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[x?.price," TND"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Your Balance:"}),e.jsxs("span",{children:[C?.money||0," TND"]})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["By confirming, ",x?.price," TND will be deducted from your wallet."]})]}),e.jsxs(G,{children:[e.jsx(t,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsxs(t,{onClick:Fe,disabled:re,children:[re&&e.jsx($,{className:"h-4 w-4 mr-2 animate-spin"}),"Confirm Purchase"]})]})]})}),e.jsx(D,{open:ke,onOpenChange:M,children:e.jsxs(O,{className:"max-w-2xl",children:[e.jsxs(q,{children:[e.jsxs(F,{children:['Requests for "',z?.title,'"']}),e.jsx(L,{children:"Manage incoming requests for your skill swap offer."})]}),e.jsx(xe,{className:"h-[400px] pr-4",children:e.jsx("div",{className:"space-y-4",children:z?.matches.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No requests for this offer yet."}):z?.matches.map((s,r)=>e.jsx(h,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(S,{className:"h-10 w-10 cursor-pointer",onClick:()=>f("publicProfile",s.requesterId),children:e.jsx(P,{children:s.requesterId.substring(0,2).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-medium cursor-pointer hover:underline",onClick:()=>f("publicProfile",s.requesterId),children:["User ",s.requesterId.substring(0,8)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.message}),s.offerInReturn&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Offering in return: ",s.offerInReturn]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Requested: ",new Date(s.requestedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(t,{size:"sm",variant:"outline",children:"Decline"}),e.jsx(t,{size:"sm",children:"Accept"})]}),s.status==="accepted"&&e.jsx(n,{className:"bg-green-500/10 text-green-500",children:"Accepted"}),s.status==="declined"&&e.jsx(n,{variant:"destructive",children:"Declined"})]})]})})},r))})}),e.jsx(G,{children:e.jsx(t,{variant:"outline",onClick:()=>M(!1),children:"Close"})})]})}),e.jsx(D,{open:Pe,onOpenChange:V,children:e.jsxs(O,{className:"max-w-2xl",children:[e.jsxs(q,{children:[e.jsx(F,{children:"Skill Offer Details"}),e.jsx(L,{children:"Detailed information about this skill swap or paid teaching offer."})]}),e.jsx(xe,{className:"h-[400px] pr-4",children:a&&e.jsx("div",{className:"space-y-4",children:e.jsx(h,{children:e.jsxs(u,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"h-12 w-12 cursor-pointer",onClick:()=>f("publicProfile",a.offeredBy),children:e.jsx(P,{children:a.offeredBy.substring(0,2).toUpperCase()})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium cursor-pointer hover:underline",onClick:()=>f("publicProfile",a.offeredBy),children:["Offered by User ",a.offeredBy.substring(0,8)]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created: ",new Date(a.createdAt).toLocaleDateString()]})]})]}),e.jsx(J,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Title:"}),e.jsx("p",{className:"text-muted-foreground",children:a.title})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Description:"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Category:"}),e.jsx(n,{variant:"outline",children:a.category})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Looking For:"}),e.jsx(n,{variant:"outline",children:a.lookingFor})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Duration:"}),e.jsx(n,{variant:"secondary",children:a.duration})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Location:"}),e.jsx(n,{variant:"secondary",children:a.location})]})]}),a.isPaid&&e.jsxs(e.Fragment,{children:[e.jsx(J,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Price:"}),e.jsxs("p",{className:"text-green-600 font-semibold",children:[a.price," TND"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Certificate Required:"}),e.jsx(n,{variant:a.certificateRequired?"default":"outline",children:a.certificateRequired?"Yes":"No"})]})]}),a.certificateUrl&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Certificate URL:"}),e.jsxs("a",{href:a.certificateUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1 text-sm",children:["View Certificate ",e.jsx(Ke,{className:"h-3 w-3"})]})]})]}),e.jsx(J,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Status:"}),e.jsx(n,{className:W(a.status),children:a.status})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Total Requests:"}),e.jsx("p",{className:"text-muted-foreground",children:a.matches.length})]})]})})})}),e.jsxs(G,{children:[e.jsx(t,{variant:"outline",onClick:()=>V(!1),children:"Close"}),a&&a.offeredBy!==d?.id&&(a.isPaid?e.jsxs(t,{onClick:()=>le(a),children:["Buy for ",a.price," TND"]}):e.jsx(t,{onClick:()=>ae(a.id),children:"Connect"}))]})]})})]})]})}export{vs as SkillSwapMode};
//# sourceMappingURL=SkillSwapMode-CqlxcYq2.js.map
