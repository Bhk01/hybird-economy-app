import{j as e,b9 as F,ba as O,bb as M,bc as J,bd as L,be as W,bf as H,bg as P,r as h,aE as v,i as Y,X as A,t as q,J as V,aF as z,F as X,e as k,k as D,U as I,aa as G,W as K,bh as Q}from"./vendor-react-DTfwnz2i.js";import{c as g,C as Z,b as _,d as ee,a as C,B as d,f as se}from"./badge-Bk34XC_J.js";import{S as ae}from"./separator-Bu3GtbjQ.js";import{u as R,b as $,n as y}from"./index-BR7N1bNZ.js";import{t as b}from"./vendor-ui-9zUGSSqf.js";function te({className:n,...r}){return e.jsx(F,{"data-slot":"avatar",className:g("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...r})}function re({className:n,...r}){return e.jsx(M,{"data-slot":"avatar-image",className:g("aspect-square size-full",n),...r})}function ie({className:n,...r}){return e.jsx(O,{"data-slot":"avatar-fallback",className:g("bg-muted flex size-full items-center justify-center rounded-full",n),...r})}function ne({className:n,children:r,...x}){return e.jsxs(J,{"data-slot":"scroll-area",className:g("relative",n),...x,children:[e.jsx(L,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:r}),e.jsx(le,{}),e.jsx(W,{})]})}function le({className:n,orientation:r="vertical",...x}){return e.jsx(H,{"data-slot":"scroll-area-scrollbar",orientation:r,className:g("flex touch-none p-px transition-colors select-none",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",n),...x,children:e.jsx(P,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function oe({isOpen:n,onClose:r,onUnreadCountChange:x}){const{t}=R(),{user:c}=$(),[l,u]=h.useState([]),[j,f]=h.useState(!1);h.useEffect(()=>{c&&n&&w()},[c,n]),h.useEffect(()=>{const s=l.filter(a=>!a.read).length;x?.(s)},[l,x]);const w=async()=>{if(c){f(!0);try{try{const a=(await y.getNotifications(c.id)).notifications.map(i=>({id:i.id,type:N(i.type),title:i.title,message:i.message,timestamp:i.createdAt,read:i.read,priority:"medium"}));u(a)}catch{console.log("API notifications not available, showing sample data");const a=[{id:"1",type:"job",title:"New Job Application",message:'Sarah Johnson applied to your "Website Development" project',timestamp:new Date(Date.now()-1e3*60*30).toISOString(),read:!1,priority:"high"},{id:"2",type:"payment",title:"Payment Received",message:"You received 250 TND for completing the logo design project",timestamp:new Date(Date.now()-1e3*60*60*2).toISOString(),read:!1,priority:"high"},{id:"3",type:"skill",title:"Skill Swap Match",message:"Ahmed Ben Ali wants to exchange Arabic lessons for your web development skills",timestamp:new Date(Date.now()-1e3*60*60*4).toISOString(),read:!0,priority:"medium"},{id:"4",type:"investment",title:"Investment Update",message:'Your investment in "Local Coffee Shop" has grown by 15%',timestamp:new Date(Date.now()-1e3*60*60*24).toISOString(),read:!0,priority:"medium"}];u(a)}}catch(s){console.error("Failed to load notifications:",s),b.error(t("notifications.loadError"))}finally{f(!1)}}},N=s=>{switch(s){case"success":return"payment";case"warning":return"system";case"error":return"system";default:return"system"}},o=async s=>{if(c)try{await y.markAsRead(c.id,s),u(a=>a.map(i=>i.id===s?{...i,read:!0}:i))}catch(a){console.error("Failed to mark notification as read:",a),u(i=>i.map(m=>m.id===s?{...m,read:!0}:m))}},p=async()=>{if(c)try{await y.markAllAsRead(c.id),u(s=>s.map(a=>({...a,read:!0}))),b.success(t("notifications.markReadSuccess"))}catch(s){console.error("Failed to mark all notifications as read:",s),u(a=>a.map(i=>({...i,read:!0}))),b.success(t("notifications.markReadSuccess"))}},T=s=>{u(a=>a.filter(i=>i.id!==s)),b.success(t("notifications.deleteSuccess"))},U=s=>{switch(s){case"job":return e.jsx(I,{className:"h-4 w-4"});case"skill":return e.jsx(D,{className:"h-4 w-4"});case"investment":return e.jsx(k,{className:"h-4 w-4"});case"payment":return e.jsx(X,{className:"h-4 w-4"});case"system":return e.jsx(z,{className:"h-4 w-4"});default:return e.jsx(v,{className:"h-4 w-4"})}},B=(s,a)=>a==="high"?"text-red-500 bg-red-500/10":s==="payment"?"text-green-500 bg-green-500/10":s==="job"?"text-blue-500 bg-blue-500/10":s==="skill"?"text-purple-500 bg-purple-500/10":s==="investment"?"text-orange-500 bg-orange-500/10":"text-gray-500 bg-gray-500/10",E=s=>{const a=new Date,i=new Date(s),m=Math.floor((a.getTime()-i.getTime())/(1e3*60));return m<1?t("notifications.justNow"):m<60?`${m}${t("notifications.minutesAgo")}`:m<1440?`${Math.floor(m/60)}${t("notifications.hoursAgo")}`:`${Math.floor(m/1440)}${t("notifications.daysAgo")}`},S=l.filter(s=>!s.read).length;return n?e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-start justify-center pt-16",children:e.jsxs(Z,{className:"w-full max-w-md mx-4 max-h-[80vh] flex flex-col shadow-xl",children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-4 flex-shrink-0",children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),t("navigation.notifications"),S>0&&e.jsx(C,{variant:"destructive",className:"ml-2",children:S})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l.length>0&&e.jsxs(d,{variant:"ghost",size:"sm",onClick:p,className:"text-xs",children:[e.jsx(Y,{className:"h-3 w-3 mr-1"}),t("notifications.markAllRead")]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(A,{className:"h-4 w-4"})})]})]}),e.jsx(ae,{className:"flex-shrink-0"}),e.jsx(se,{className:"flex-1 p-0 overflow-hidden",children:e.jsx(ne,{className:"h-full max-h-[55vh]",children:j?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):l.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center px-4",children:[e.jsx(v,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:t("notifications.noNotifications")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("notifications.noNotificationsDesc")})]}):e.jsx("div",{className:"divide-y",children:l.map((s,a)=>e.jsx("div",{className:`p-4 hover:bg-muted/50 transition-colors ${s.read?"":"bg-blue-50/50 dark:bg-blue-950/20"} ${a===l.length-1?"border-b-0":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${B(s.type,s.priority)}`,children:U(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1 gap-2",children:[e.jsx("h4",{className:"text-sm font-medium truncate flex-1",children:s.title}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[!s.read&&e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>o(s.id),className:"h-6 w-6 p-0",children:e.jsx(q,{className:"h-3 w-3"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>T(s.id),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:e.jsx(A,{className:"h-3 w-3"})})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2 break-words",children:s.message}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(V,{className:"h-3 w-3"}),E(s.timestamp)]}),s.priority==="high"&&e.jsx(C,{variant:"destructive",className:"text-xs",children:t("notifications.highPriority")})]})]})]})},s.id))})})})]})}):null}function he({currentPage:n,onNavigate:r,onLogout:x}){const{user:t,wallet:c}=$(),{t:l}=R(),[u,j]=h.useState(!1),[f,w]=h.useState(0),N=[{id:"dashboard",label:l("navigation.dashboard"),icon:G},{id:"hire",label:l("navigation.hire"),icon:I},{id:"skillswap",label:l("navigation.skillSwap"),icon:D},{id:"investment",label:l("navigation.investment"),icon:k}];return e.jsxs("header",{className:"border-b bg-background/80 backdrop-blur-sm sticky top-0 z-50",children:[e.jsxs("div",{className:"container mx-auto px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-primary text-primary-foreground p-2 rounded-lg",children:e.jsx(k,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg",children:l("auth.welcome")})]}),e.jsx("nav",{className:"hidden md:flex items-center space-x-1",children:N.map(o=>{const p=o.icon;return e.jsxs(d,{variant:n===o.id?"default":"ghost",size:"sm",onClick:()=>r(o.id),className:"gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),o.label]},o.id)})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>r("wallet"),className:"gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:c?`${c.money} TND`:l("navigation.wallet")})]}),e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>j(!0),className:"relative",children:[e.jsx(v,{className:"h-4 w-4"}),f>0&&e.jsx(C,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center text-xs",children:f})]}),e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>r("profile"),className:"gap-2",children:[e.jsxs(te,{className:"h-6 w-6",children:[e.jsx(ie,{children:t?t.name.split(" ").map(o=>o[0]).join("").toUpperCase():"U"}),t?.avatar&&e.jsx(re,{src:t.avatar})]}),e.jsx("span",{className:"hidden sm:inline",children:t?t.name.split(" ")[0]:l("navigation.profile")})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>r("settings"),className:"text-muted-foreground",children:e.jsx(z,{className:"h-4 w-4"})}),x&&e.jsx(d,{variant:"ghost",size:"sm",onClick:x,className:"text-muted-foreground",children:e.jsx(Q,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"md:hidden mt-3 flex items-center space-x-1 overflow-x-auto",children:N.map(o=>{const p=o.icon;return e.jsxs(d,{variant:n===o.id?"default":"ghost",size:"sm",onClick:()=>r(o.id),className:"gap-2 whitespace-nowrap",children:[e.jsx(p,{className:"h-4 w-4"}),o.label]},o.id)})})]}),e.jsx(oe,{isOpen:u,onClose:()=>j(!1),onUnreadCountChange:w})]})}export{te as A,he as N,ne as S,ie as a,re as b};
//# sourceMappingURL=Navigation-DYALYri8.js.map
