import{r as y,w as K,x as X,g as _,m as Q,B as V,y as W,z as Y,F as Z,j as e,q as $,i as f,A as ee,X as j,H as g}from"./vendor-react-DTfwnz2i.js";import{C as u,b as ie,d as se,e as re,B as d,f as p,a as ne}from"./badge-Bk34XC_J.js";import{I as o}from"./input-BMLotNza.js";import{T as v}from"./textarea-C2mIUScX.js";import{P as te}from"./progress-CSXUF28C.js";import{L as l}from"./label-qGWvcckI.js";import{t as m}from"./vendor-ui-9zUGSSqf.js";import{u as ae,b as ce,c as le}from"./index-BR7N1bNZ.js";import"./vendor-Cgdd8BZB.js";function be({userId:N,userName:k,userEmail:oe,onComplete:D,onSkip:F}){const{t:i}=ae(),{setUser:P}=ce(),[x,E]=y.useState(0),[w,b]=y.useState(!1),[n,c]=y.useState({bio:"",location:"",skills:[],currentSkill:"",jobExperiences:[],currentJobExperience:{title:"",company:"",startDate:"",endDate:null,description:""},studyExperiences:[],currentStudyExperience:{degree:"",institution:"",startDate:"",endDate:null,description:""},certifications:[],currentCertification:{name:"",issuer:"",date:""},servicesOffered:[],currentService:{name:"",price:"",rating:0}}),h=[{id:"welcome",title:i("onboarding.welcomeTitle"),description:i("onboarding.welcomeDescription"),icon:K},{id:"bio",title:i("onboarding.bioTitle"),description:i("onboarding.bioDescription"),icon:X},{id:"location",title:i("onboarding.locationTitle"),description:i("onboarding.locationDescription"),icon:_},{id:"skills",title:i("onboarding.skillsTitle"),description:i("onboarding.skillsDescription"),icon:Q},{id:"jobExperience",title:i("onboarding.jobExperienceTitle"),description:i("onboarding.jobExperienceDescription"),icon:V},{id:"studyExperience",title:i("onboarding.studyExperienceTitle"),description:i("onboarding.studyExperienceDescription"),icon:W},{id:"certifications",title:i("profile.certificationsTitle"),description:i("profile.certificationsDescription"),icon:Y},{id:"servicesOffered",title:i("profile.servicesOfferedTitle"),description:i("profile.servicesOfferedDescription"),icon:Z}],C=(x+1)/h.length*100,S=()=>{n.currentSkill.trim()&&n.skills.length<10&&c({...n,skills:[...n.skills,n.currentSkill.trim()],currentSkill:""})},J=a=>{c({...n,skills:n.skills.filter((t,s)=>s!==a)})},O=()=>{const{title:a,company:t,startDate:s}=n.currentJobExperience;a&&t&&s?c(r=>({...r,jobExperiences:[...r.jobExperiences,{...r.currentJobExperience,id:Date.now().toString()}],currentJobExperience:{title:"",company:"",startDate:"",endDate:null,description:""}})):m.error(i("onboarding.jobExperienceRequiredFields"))},T=a=>{c(t=>({...t,jobExperiences:t.jobExperiences.filter(s=>s.id!==a)}))},R=()=>{const{degree:a,institution:t,startDate:s}=n.currentStudyExperience;a&&t&&s?c(r=>({...r,studyExperiences:[...r.studyExperiences,{...r.currentStudyExperience,id:Date.now().toString()}],currentStudyExperience:{degree:"",institution:"",startDate:"",endDate:null,description:""}})):m.error(i("onboarding.studyExperienceRequiredFields"))},A=a=>{c(t=>({...t,studyExperiences:t.studyExperiences.filter(s=>s.id!==a)}))},z=()=>{const{name:a,issuer:t,date:s}=n.currentCertification;a&&t&&s?c(r=>({...r,certifications:[...r.certifications,{...r.currentCertification,id:Date.now().toString()}],currentCertification:{name:"",issuer:"",date:""}})):m.error(i("profile.certificationRequiredFields"))},B=a=>{c(t=>({...t,certifications:t.certifications.filter(s=>s.id!==a)}))},I=()=>{const{name:a,price:t}=n.currentService;a&&t?(c(s=>({...s,servicesOffered:[...s.servicesOffered,{...s.currentService,id:Date.now().toString(),rating:0}]})),c(s=>({...s,currentService:{name:"",price:"",rating:0}}))):m.error(i("profile.serviceRequiredFields"))},L=a=>{c(t=>({...t,servicesOffered:t.servicesOffered.filter(s=>s.id!==a)}))},q=()=>{x<h.length-1?E(x+1):H()},U=()=>{x>0&&E(x-1)},H=async()=>{if(b(!0),!N){console.error("ProfileOnboarding.tsx: userId is missing, cannot complete onboarding."),m.error(i("onboarding.saveFailed")+": User ID missing."),b(!1);return}const a={bio:n.bio,location:n.location,skills:n.skills,jobExperiences:n.jobExperiences,studyExperiences:n.studyExperiences,certifications:n.certifications,servicesOffered:n.servicesOffered,onboardingCompleted:!0,profileCompleteness:M()};try{const t=await le.updateProfile(N,a);t.success?(P(t.profile),m.success(i("onboarding.profileCompleted")),D()):m.error(t.error||i("onboarding.saveFailed"))}catch(t){console.error("ProfileOnboarding.tsx: Error updating profile during onboarding:",t),m.error(i("onboarding.saveFailed"))}finally{b(!1)}},M=()=>{let a=20;return n.bio.length>50&&(a+=15),n.location&&(a+=10),n.skills.length>=3&&(a+=20),n.jobExperiences.length>0&&(a+=15),n.studyExperiences.length>0&&(a+=10),n.certifications.length>0&&(a+=5),n.servicesOffered.length>0&&(a+=5),n.bio.length>100&&n.skills.length>=5&&n.jobExperiences.length>1&&n.studyExperiences.length>0&&(a+=10),Math.min(a,100)},G=()=>{const a=h[x],t=a.icon;switch(a.id){case"welcome":return e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsx("div",{className:"bg-primary/10 w-20 h-20 rounded-full flex items-center justify-center mx-auto",children:e.jsx(t,{className:"h-10 w-10 text-primary"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl mb-2",children:[i("onboarding.welcome"),", ",k,"! 👋"]}),e.jsx("p",{className:"text-muted-foreground",children:i("onboarding.letsSetup")})]}),e.jsx(u,{className:"bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800",children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:i("onboarding.benefit1")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:i("onboarding.benefit2")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:i("onboarding.benefit3")})]})]})})})]});case"bio":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto",children:e.jsx(t,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{htmlFor:"bio",children:i("onboarding.tellUs")}),e.jsx(v,{id:"bio",placeholder:i("onboarding.bioPlaceholder"),value:n.bio,onChange:s=>c({...n,bio:s.target.value}),rows:5,className:"resize-none"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.bio.length,"/500 ",i("onboarding.characters")]})]})]});case"location":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto",children:e.jsx(t,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{htmlFor:"location",children:i("onboarding.whereLocated")}),e.jsx(o,{id:"location",placeholder:i("onboarding.locationPlaceholder"),value:n.location,onChange:s=>c({...n,location:s.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i("onboarding.locationHelp")})]})]});case"skills":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto",children:e.jsx(t,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{htmlFor:"skills",children:i("onboarding.addSkills")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{id:"skills",placeholder:i("onboarding.skillsPlaceholder"),value:n.currentSkill,onChange:s=>c({...n,currentSkill:s.target.value}),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),S())}),e.jsx(d,{type:"button",onClick:S,disabled:!n.currentSkill.trim()||n.skills.length>=10,children:i("common.add")})]}),n.skills.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:n.skills.map((s,r)=>e.jsxs(ne,{variant:"secondary",className:"gap-1",children:[s,e.jsx("button",{onClick:()=>J(r),className:"ml-1 hover:text-destructive",children:e.jsx(j,{className:"h-3 w-3"})})]},r))}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.skills.length,"/10 ",i("onboarding.skillsAdded")]})]})]});case"jobExperience":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto",children:e.jsx(t,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{children:i("onboarding.jobExperienceTitle")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:i("onboarding.jobExperienceDescription")}),n.jobExperiences.map((s,r)=>e.jsx(u,{className:"mb-2",children:e.jsxs(p,{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[s.title," at ",s.company]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.startDate," - ",s.endDate||i("onboarding.current")]})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>T(s.id),children:e.jsx(j,{className:"h-4 w-4 text-destructive"})})]})},s.id)),e.jsxs(u,{className:"p-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:i("onboarding.addJobExperience")}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"job-title",children:i("onboarding.jobTitle")}),e.jsx(o,{id:"job-title",placeholder:i("onboarding.jobTitlePlaceholder"),value:n.currentJobExperience.title,onChange:s=>c(r=>({...r,currentJobExperience:{...r.currentJobExperience,title:s.target.value}}))})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"company",children:i("onboarding.company")}),e.jsx(o,{id:"company",placeholder:i("onboarding.companyPlaceholder"),value:n.currentJobExperience.company,onChange:s=>c(r=>({...r,currentJobExperience:{...r.currentJobExperience,company:s.target.value}}))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"job-start-date",children:i("onboarding.startDate")}),e.jsx(o,{id:"job-start-date",type:"date",value:n.currentJobExperience.startDate,onChange:s=>c(r=>({...r,currentJobExperience:{...r.currentJobExperience,startDate:s.target.value}}))})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"job-end-date",children:[i("onboarding.endDate")," (",i("onboarding.optional"),")"]}),e.jsx(o,{id:"job-end-date",type:"date",value:n.currentJobExperience.endDate||"",onChange:s=>c(r=>({...r,currentJobExperience:{...r.currentJobExperience,endDate:s.target.value||null}}))})]})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"job-description",children:[i("onboarding.description")," (",i("onboarding.optional"),")"]}),e.jsx(v,{id:"job-description",placeholder:i("onboarding.jobDescriptionPlaceholder"),value:n.currentJobExperience.description,onChange:s=>c(r=>({...r,currentJobExperience:{...r.currentJobExperience,description:s.target.value}})),rows:3})]}),e.jsxs(d,{type:"button",onClick:O,className:"w-full gap-2",children:[e.jsx(g,{className:"h-4 w-4"})," ",i("onboarding.addExperience")]})]})]})]});case"studyExperience":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto",children:e.jsx(t,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{children:i("onboarding.studyExperienceTitle")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:i("onboarding.studyExperienceDescription")}),n.studyExperiences.map((s,r)=>e.jsx(u,{className:"mb-2",children:e.jsxs(p,{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[s.degree," at ",s.institution]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.startDate," - ",s.endDate||i("onboarding.current")]})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>A(s.id),children:e.jsx(j,{className:"h-4 w-4 text-destructive"})})]})},s.id)),e.jsxs(u,{className:"p-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:i("onboarding.addStudyExperience")}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"degree",children:i("onboarding.degree")}),e.jsx(o,{id:"degree",placeholder:i("onboarding.degreePlaceholder"),value:n.currentStudyExperience.degree,onChange:s=>c(r=>({...r,currentStudyExperience:{...r.currentStudyExperience,degree:s.target.value}}))})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"institution",children:i("onboarding.institution")}),e.jsx(o,{id:"institution",placeholder:i("onboarding.institutionPlaceholder"),value:n.currentStudyExperience.institution,onChange:s=>c(r=>({...r,currentStudyExperience:{...r.currentStudyExperience,institution:s.target.value}}))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"study-start-date",children:i("onboarding.startDate")}),e.jsx(o,{id:"study-start-date",type:"date",value:n.currentStudyExperience.startDate,onChange:s=>c(r=>({...r,currentStudyExperience:{...r.currentStudyExperience,startDate:s.target.value}}))})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"study-end-date",children:[i("onboarding.endDate")," (",i("onboarding.optional"),")"]}),e.jsx(o,{id:"study-end-date",type:"date",value:n.currentStudyExperience.endDate||"",onChange:s=>c(r=>({...r,currentStudyExperience:{...r.currentStudyExperience,endDate:s.target.value||null}}))})]})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"study-description",children:[i("onboarding.description")," (",i("onboarding.optional"),")"]}),e.jsx(v,{id:"study-description",placeholder:i("onboarding.studyDescriptionPlaceholder"),value:n.currentStudyExperience.description,onChange:s=>c(r=>({...r,currentStudyExperience:{...r.currentStudyExperience,description:s.target.value}})),rows:3})]}),e.jsxs(d,{type:"button",onClick:R,className:"w-full gap-2",children:[e.jsx(g,{className:"h-4 w-4"})," ",i("onboarding.addEducation")]})]})]})]});case"certifications":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto",children:e.jsx(t,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{children:i("profile.certificationsTitle")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:i("profile.certificationsDescription")}),n.certifications.map(s=>e.jsx(u,{className:"mb-2",children:e.jsxs(p,{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.issuer," • ",s.date]})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>B(s.id),children:e.jsx(j,{className:"h-4 w-4 text-destructive"})})]})},s.id)),e.jsxs(u,{className:"p-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:i("profile.addCertification")}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"cert-name",children:i("profile.certificationName")}),e.jsx(o,{id:"cert-name",placeholder:i("profile.certificationNamePlaceholder"),value:n.currentCertification.name,onChange:s=>c(r=>({...r,currentCertification:{...r.currentCertification,name:s.target.value}}))})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"cert-issuer",children:i("profile.issuer")}),e.jsx(o,{id:"cert-issuer",placeholder:i("profile.issuerPlaceholder"),value:n.currentCertification.issuer,onChange:s=>c(r=>({...r,currentCertification:{...r.currentCertification,issuer:s.target.value}}))})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"cert-date",children:i("profile.dateIssued")}),e.jsx(o,{id:"cert-date",type:"date",value:n.currentCertification.date,onChange:s=>c(r=>({...r,currentCertification:{...r.currentCertification,date:s.target.value}}))})]}),e.jsxs(d,{type:"button",onClick:z,className:"w-full gap-2",children:[e.jsx(g,{className:"h-4 w-4"})," ",i("profile.addCertification")]})]})]})]});case"servicesOffered":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto",children:e.jsx(t,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{children:i("profile.servicesOfferedTitle")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:i("profile.servicesOfferedDescription")}),n.servicesOffered.map(s=>e.jsx(u,{className:"mb-2",children:e.jsxs(p,{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.price})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>L(s.id),children:e.jsx(j,{className:"h-4 w-4 text-destructive"})})]})},s.id)),e.jsxs(u,{className:"p-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:i("profile.addService")}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"service-name",children:i("profile.serviceName")}),e.jsx(o,{id:"service-name",placeholder:i("profile.serviceNamePlaceholder"),value:n.currentService.name,onChange:s=>c(r=>({...r,currentService:{...r.currentService,name:s.target.value}}))})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"service-price",children:i("profile.servicePrice")}),e.jsx(o,{id:"service-price",placeholder:i("profile.servicePricePlaceholder"),value:n.currentService.price,onChange:s=>c(r=>({...r,currentService:{...r.currentService,price:s.target.value}}))})]}),e.jsxs(d,{type:"button",onClick:I,className:"w-full gap-2",children:[e.jsx(g,{className:"h-4 w-4"})," ",i("profile.addService")]})]})]})]});default:return null}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:e.jsxs(u,{className:"w-full max-w-2xl shadow-xl",children:[e.jsx(ie,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(se,{children:h[x].title}),e.jsx(re,{children:h[x].description})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:F,children:i("common.skip")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:[i("onboarding.step")," ",x+1," ",i("onboarding.of")," ",h.length]}),e.jsxs("span",{children:[Math.round(C),"% ",i("onboarding.complete")]})]}),e.jsx(te,{value:C,className:"h-2"})]})]})}),e.jsxs(p,{className:"space-y-6",children:[G(),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsxs(d,{variant:"outline",onClick:U,disabled:x===0,children:[e.jsx($,{className:"mr-2 h-4 w-4"}),i("common.back")]}),e.jsx(d,{onClick:q,disabled:w,children:w?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-2",children:i("common.saving")}),e.jsx("span",{className:"animate-spin",children:"⏳"})]}):x===h.length-1?e.jsxs(e.Fragment,{children:[i("common.finish"),e.jsx(f,{className:"ml-2 h-4 w-4"})]}):e.jsxs(e.Fragment,{children:[i("common.next"),e.jsx(ee,{className:"ml-2 h-4 w-4"})]})})]})]})]})})}export{be as ProfileOnboarding};
//# sourceMappingURL=ProfileOnboarding-BNivKdDZ.js.map
