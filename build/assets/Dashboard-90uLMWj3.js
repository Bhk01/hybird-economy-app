import{r as n,j as s,s as y,k as h,m as L,U as b,e as g,A as z,J as E,i as U,u as F,K as H}from"./vendor-react-DTfwnz2i.js";import{N as M}from"./Navigation-DYALYri8.js";import{C as x,f as m,b as p,d as j,e as N,B as o,a as O}from"./badge-Bk34XC_J.js";import{P as f}from"./progress-CSXUF28C.js";import{b as W,u as K,w as V,j as G,s as Q,p as X}from"./index-BR7N1bNZ.js";import"./vendor-Cgdd8BZB.js";import"./separator-Bu3GtbjQ.js";import"./vendor-ui-9zUGSSqf.js";function cs({onNavigate:i,onLogout:Y}){const{user:d,wallet:r,refreshWallet:Z}=W(),{t:e}=K(),[k,v]=n.useState(!0),[w,A]=n.useState([]),[D,C]=n.useState(0),[S,T]=n.useState(0),[$,R]=n.useState(0);n.useEffect(()=>{I()},[d]);const I=async()=>{if(d){v(!0);try{const[a,l,t,c]=await Promise.all([V.getTransactions(d.id).catch(()=>({transactions:[]})),G.getAllJobs().catch(()=>({jobs:[]})),Q.getAllSkills().catch(()=>({skills:[]})),X.getAllProjects().catch(()=>({projects:[]}))]);A(a.transactions.slice(0,4)),C(l.jobs.length),T(t.skills.length),R(c.projects.length)}catch(a){console.error("Failed to load dashboard data:",a)}finally{v(!1)}}};if(!d||!r)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx(y,{className:"h-8 w-8 animate-spin"})});const u=(r.money||0)+(r.equity||0)+(r.credits||0)*10,P=[{label:e("dashboard.skillCredits"),value:`${r.credits}`,icon:h,color:"text-purple-500"},{label:e("dashboard.userRating"),value:d.rating.toFixed(1),icon:L,color:"text-yellow-500"}],J=a=>{const l=new Date,t=new Date(a),c=Math.floor((l.getTime()-t.getTime())/(1e3*60*60));return c<1?e("dashboard.justNow"):c<24?`${c} ${e("dashboard.hoursAgo")}`:c<168?`${Math.floor(c/24)} ${e("dashboard.daysAgo")}`:t.toLocaleDateString()},q=a=>{const l=a.operation==="add";return{type:a.type==="money"?"hire":a.type==="credits"?"swap":"investment",title:a.description||`${a.type} ${a.operation}`,description:`${l?"+":"-"}${a.amount} ${a.type}`,time:J(a.timestamp),status:e("dashboard.completed")}},B=[{title:e("dashboard.postJob"),description:e("dashboard.postJobDesc"),icon:b,action:()=>i("hire"),color:"bg-blue-500"},{title:e("dashboard.offerSkills"),description:e("dashboard.offerSkillsDesc"),icon:h,action:()=>i("skillswap"),color:"bg-green-500"},{title:e("dashboard.browseInvestments"),description:e("dashboard.browseInvestmentsDesc"),icon:g,action:()=>i("investment"),color:"bg-purple-500"}];return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(M,{currentPage:"dashboard",onNavigate:i}),s.jsxs("div",{className:"container mx-auto px-4 py-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-2xl mb-2",children:[e("dashboard.welcomeBack"),", ",d.name,"!"]}),s.jsx("p",{className:"text-muted-foreground",children:e("dashboard.subtitle")}),k&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[s.jsx(y,{className:"h-4 w-4 animate-spin"}),e("dashboard.loadingData")]})]}),s.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:P.map((a,l)=>{const t=a.icon;return s.jsx(x,{children:s.jsx(m,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:a.label}),s.jsx("p",{className:"text-xl",children:a.value})]}),s.jsx(t,{className:`h-5 w-5 ${a.color}`})]})})},l)})}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs(x,{children:[s.jsxs(p,{children:[s.jsx(j,{children:e("dashboard.quickActions")}),s.jsx(N,{children:e("dashboard.quickActionsDesc")})]}),s.jsx(m,{className:"space-y-3",children:B.map((a,l)=>{const t=a.icon;return s.jsxs(o,{variant:"ghost",className:"w-full justify-start gap-3 h-auto p-3",onClick:a.action,children:[s.jsx("div",{className:`p-2 rounded-lg ${a.color} text-white`,children:s.jsx(t,{className:"h-4 w-4"})}),s.jsxs("div",{className:"text-left flex-1",children:[s.jsx("p",{className:"text-sm",children:a.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:a.description})]}),s.jsx(z,{className:"h-4 w-4"})]},l)})})]}),s.jsxs(x,{className:"mt-6",children:[s.jsx(p,{children:s.jsx(j,{children:e("dashboard.portfolioSummary")})}),s.jsxs(m,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{children:e("dashboard.cashBalance")}),s.jsxs("span",{children:[r.money," TND"]})]}),s.jsx(f,{value:r.money/u*100,className:"h-2"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{children:e("dashboard.equityValue")}),s.jsxs("span",{children:[(r.equity*100).toFixed(0)," TND"]})]}),s.jsx(f,{value:r.equity*100/u*100,className:"h-2"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{children:e("dashboard.skillCredits")}),s.jsxs("span",{children:[r.credits," credits"]})]}),s.jsx(f,{value:r.credits*10/u*100,className:"h-2"})]}),s.jsx(o,{variant:"outline",size:"sm",className:"w-full",onClick:()=>i("wallet"),children:e("dashboard.viewDetailedWallet")})]})]})]}),s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs(x,{children:[s.jsxs(p,{children:[s.jsx(j,{children:e("dashboard.recentActivity")}),s.jsx(N,{children:e("dashboard.recentActivityDesc")})]}),s.jsxs(m,{children:[s.jsx("div",{className:"space-y-4",children:w.length>0?w.map((a,l)=>{const t=q(a);return s.jsxs("div",{className:"flex items-start gap-4 p-3 rounded-lg hover:bg-muted/50",children:[s.jsxs("div",{className:`p-2 rounded-lg ${t.type==="hire"?"bg-blue-500/10 text-blue-500":t.type==="swap"?"bg-green-500/10 text-green-500":"bg-purple-500/10 text-purple-500"}`,children:[t.type==="hire"&&s.jsx(b,{className:"h-4 w-4"}),t.type==="swap"&&s.jsx(h,{className:"h-4 w-4"}),t.type==="investment"&&s.jsx(g,{className:"h-4 w-4"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"text-sm",children:t.title}),s.jsx(O,{variant:t.status===e("dashboard.completed")?"default":t.status===e("dashboard.active")?"secondary":"outline",className:"text-xs",children:t.status})]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:t.description}),s.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(E,{className:"h-3 w-3"}),t.time]})]}),t.status===e("dashboard.completed")&&s.jsx(U,{className:"h-4 w-4 text-green-500"}),t.status===e("dashboard.pending")&&s.jsx(F,{className:"h-4 w-4 text-yellow-500"})]},l)}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(H,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:e("dashboard.noRecentActivity")}),s.jsx("p",{className:"text-sm",children:e("dashboard.noActivityDesc")})]})}),s.jsx(o,{variant:"outline",className:"w-full mt-4",children:e("dashboard.viewAllActivity")})]})]}),s.jsxs(x,{className:"mt-6",children:[s.jsxs(p,{children:[s.jsx(j,{children:e("dashboard.aiRecommendations")}),s.jsx(N,{children:e("dashboard.aiRecommendationsDesc")})]}),s.jsx(m,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-500/5 rounded-lg border border-blue-500/20",children:[s.jsx(b,{className:"h-5 w-5 text-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-sm",children:[D," ",e("dashboard.activeJobPostings")]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:e("dashboard.browseJobsDesc")})]}),s.jsx(o,{size:"sm",variant:"outline",onClick:()=>i("hire"),children:e("dashboard.browse")})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-500/5 rounded-lg border border-green-500/20",children:[s.jsx(h,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-sm",children:[S," ",e("dashboard.skillExchangeOffers")]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:e("dashboard.exchangeSkillsDesc")})]}),s.jsx(o,{size:"sm",variant:"outline",onClick:()=>i("skillswap"),children:e("dashboard.explore")})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-500/5 rounded-lg border border-purple-500/20",children:[s.jsx(g,{className:"h-5 w-5 text-purple-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-sm",children:[$," Investment Opportunities"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Discover local projects seeking micro-investments"})]}),s.jsx(o,{size:"sm",variant:"outline",onClick:()=>i("investment"),children:"Invest"})]})]})})]})]})]})]})]})}export{cs as Dashboard};
//# sourceMappingURL=Dashboard-90uLMWj3.js.map
