import{r as c,j as e,s as B,u as L,q as X,i as Z,g as ee,m,aL as se,aM as re,aN as ae,h as ie,au as te,av as le,B as ce,y as ne,z as oe}from"./vendor-react-DTfwnz2i.js";import{N as de,A as O,a as J,b as xe}from"./Navigation-DYALYri8.js";import{B as n,C as d,f as x,b as h,d as u,a as me,e as he}from"./badge-Bk34XC_J.js";import{T as ue}from"./textarea-C2mIUScX.js";import{L as k}from"./label-qGWvcckI.js";import{D as M,a as I,b as q,c as H,d as V,e as W,f as _}from"./dialog-BD2p6u1S.js";import{S as pe,a as fe,b as je,c as ge,d as f}from"./select-DrUTnnsr.js";import{t as i}from"./vendor-ui-9zUGSSqf.js";import{b as Ne,u as be,c as j,r as ve}from"./index-BR7N1bNZ.js";import"./vendor-Cgdd8BZB.js";import"./separator-Bu3GtbjQ.js";function Fe({userId:g,onNavigate:p}){const{user:o}=Ne(),{t:s}=be(),[a,R]=c.useState(null),[z,S]=c.useState(!0),[D,N]=c.useState(null),[G,b]=c.useState(!1),[v,E]=c.useState(""),[Y,w]=c.useState(!1),[P,A]=c.useState(0),[y,T]=c.useState(""),[F,U]=c.useState(!1);if(c.useEffect(()=>{g&&(async()=>{S(!0),N(null);try{const l=await j.getProfile(g);l.profile?R(l.profile):N(s("publicProfile.profileNotFound"))}catch(l){console.error("Failed to fetch public profile:",l),N(l.message||s("publicProfile.fetchError"))}finally{S(!1)}})()},[g,s]),z)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx(B,{className:"h-8 w-8 animate-spin"})});if(D)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background p-4",children:[e.jsx(L,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h2",{className:"text-xl mb-2",children:s("common.error")}),e.jsx("p",{className:"text-muted-foreground text-center",children:D}),e.jsxs(n,{onClick:()=>p("dashboard"),className:"mt-6",children:[e.jsx(X,{className:"mr-2 h-4 w-4"})," ",s("common.backToDashboard")]})]});if(!a)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background p-4",children:[e.jsx(L,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h2",{className:"text-xl mb-2",children:s("publicProfile.profileNotFound")}),e.jsx("p",{className:"text-muted-foreground text-center",children:s("publicProfile.profileUnavailable")}),e.jsxs(n,{onClick:()=>p("dashboard"),className:"mt-6",children:[e.jsx(X,{className:"mr-2 h-4 w-4"})," ",s("common.backToDashboard")]})]});const $=async()=>{if(!o){i.error(s("publicProfile.loginToBlock"));return}if(window.confirm(s("publicProfile.confirmBlock",{userName:a.name})))try{const r=await j.blockUser(a.id,o.id);r.success?(i.success(s("publicProfile.blockSuccess",{userName:a.name})),p("dashboard")):i.error(r.error||s("publicProfile.blockError"))}catch(r){i.error(r.message||s("publicProfile.blockError"))}},K=async()=>{if(!o){i.error(s("publicProfile.loginToReport"));return}if(!v){i.error(s("publicProfile.selectReportReason"));return}try{const r=await j.reportUser(a.id,o.id,v);r.success?(i.success(s("publicProfile.reportSuccess",{userName:a.name})),b(!1),E("")):i.error(r.error||s("publicProfile.reportError"))}catch(r){i.error(r.message||s("publicProfile.reportError"))}},Q=async()=>{if(!o){i.error(s("publicProfile.loginToAddReview"));return}if(o.id===a.id){i.error(s("publicProfile.cannotReviewSelf"));return}if(P===0||!y.trim()){i.error(s("publicProfile.reviewRequiredFields"));return}U(!0);try{const r=await ve.addReview(a.id,o.id,P,y);if(r.success){i.success(s("publicProfile.reviewSuccess")),w(!1),A(0),T("");const l=await j.getProfile(a.id);l.profile&&R(l.profile)}else i.error(r.error||s("publicProfile.reviewError"))}catch(r){i.error(r.message||s("publicProfile.reviewError"))}finally{U(!1)}},t={name:a.name,title:"Work & Invest Member",location:a.location,joinedDate:a.createdAt?new Date(a.createdAt).toLocaleDateString("en-US",{month:"long",year:"numeric"}):"Recently",rating:a.rating||0,reviewCount:a.reviews?.length||0,completedJobs:a.completedJobs||0,activeProjects:0,skillCredits:0,totalEarnings:a.totalEarnings||0,bio:a.bio,phone:"+216 XX XXX XXX",email:a.email};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(de,{currentPage:"dashboard",onNavigate:p})," ",e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"lg:w-80",children:e.jsx(d,{className:"sticky top-24",children:e.jsxs(x,{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs(O,{className:"h-24 w-24 mx-auto mb-3",children:[e.jsx(J,{className:"text-2xl",children:a.name.split(" ").map(r=>r[0]).join("").toUpperCase()}),a.avatar&&e.jsx(xe,{src:a.avatar})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx("h2",{className:"text-xl",children:t.name}),e.jsx(Z,{className:"h-5 w-5 text-blue-500"})]}),e.jsx("p",{className:"text-muted-foreground text-sm mb-2",children:t.title}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground mb-3",children:[e.jsx(ee,{className:"h-4 w-4"}),t.location]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(m,{className:"h-4 w-4 fill-current text-yellow-500"}),e.jsx("span",{children:t.rating.toFixed(1)}),e.jsxs("span",{className:"text-muted-foreground",children:["(",t.reviewCount," reviews)"]})]}),o?.id!==a.id&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(n,{className:"gap-2",onClick:()=>i.info(s("publicProfile.chatFeatureComingSoon")),children:[e.jsx(se,{className:"h-4 w-4"}),s("publicProfile.message")]}),e.jsxs(M,{open:Y,onOpenChange:w,children:[e.jsx(I,{asChild:!0,children:e.jsxs(n,{variant:"outline",className:"gap-2",children:[e.jsx(m,{className:"h-4 w-4"}),s("publicProfile.addReview")]})}),e.jsxs(q,{children:[e.jsxs(H,{children:[e.jsx(V,{children:s("publicProfile.addReviewFor",{userName:a.name})}),e.jsx(W,{children:s("publicProfile.shareExperience")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(k,{children:s("publicProfile.yourRating")}),e.jsx("div",{className:"flex gap-1 mt-2",children:[1,2,3,4,5].map(r=>e.jsx(m,{className:`h-6 w-6 cursor-pointer ${P>=r?"fill-current text-yellow-500":"text-muted-foreground"}`,onClick:()=>A(r)},r))})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"review-comment",children:s("publicProfile.yourComment")}),e.jsx(ue,{id:"review-comment",placeholder:s("publicProfile.commentPlaceholder"),value:y,onChange:r=>T(r.target.value),rows:4})]})]}),e.jsxs(_,{children:[e.jsx(n,{variant:"outline",onClick:()=>w(!1),children:s("common.cancel")}),e.jsxs(n,{onClick:Q,disabled:F,children:[F&&e.jsx(B,{className:"h-4 w-4 mr-2 animate-spin"}),s("common.submit")]})]})]})]}),e.jsxs(M,{open:G,onOpenChange:b,children:[e.jsx(I,{asChild:!0,children:e.jsxs(n,{variant:"ghost",className:"gap-2 text-destructive hover:text-destructive",children:[e.jsx(re,{className:"h-4 w-4"}),s("publicProfile.reportUser")]})}),e.jsxs(q,{children:[e.jsxs(H,{children:[e.jsx(V,{children:s("publicProfile.reportUserFor",{userName:a.name})}),e.jsx(W,{children:s("publicProfile.reportReasonDesc")})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(k,{htmlFor:"report-reason",children:s("publicProfile.reason")}),e.jsxs(pe,{value:v,onValueChange:E,children:[e.jsx(fe,{children:e.jsx(je,{placeholder:s("publicProfile.selectReason")})}),e.jsxs(ge,{children:[e.jsx(f,{value:"spam",children:s("publicProfile.reasonSpam")}),e.jsx(f,{value:"harassment",children:s("publicProfile.reasonHarassment")}),e.jsx(f,{value:"fraud",children:s("publicProfile.reasonFraud")}),e.jsx(f,{value:"other",children:s("publicProfile.reasonOther")})]})]})]})}),e.jsxs(_,{children:[e.jsx(n,{variant:"outline",onClick:()=>b(!1),children:s("common.cancel")}),e.jsx(n,{variant:"destructive",onClick:K,children:s("publicProfile.submitReport")})]})]})]}),e.jsxs(n,{variant:"ghost",className:"gap-2 text-destructive hover:text-destructive",onClick:$,children:[e.jsx(ae,{className:"h-4 w-4"}),s("publicProfile.blockUser")]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl text-primary",children:t.completedJobs}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed Jobs"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl text-green-500",children:t.totalEarnings}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Earnings (TND)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl text-blue-500",children:t.activeProjects}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active Projects"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl text-purple-500",children:t.skillCredits}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Skill Credits"})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:t.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:t.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Joined ",t.joinedDate]})]})]})]})})}),e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs(d,{children:[e.jsx(h,{children:e.jsx(u,{children:"About Me"})}),e.jsx(x,{children:e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:t.bio})})]}),e.jsxs(d,{children:[e.jsx(h,{children:e.jsx(u,{children:"Skills & Expertise"})}),e.jsx(x,{className:"space-y-4",children:a.skills?.length===0?e.jsx("p",{className:"text-muted-foreground text-sm",children:s("profile.noSkillsAdded")}):e.jsx("div",{className:"flex flex-wrap gap-2",children:a.skills?.map((r,l)=>e.jsx(me,{variant:"secondary",className:"text-sm",children:r},l))})})]}),e.jsxs(d,{children:[e.jsx(h,{children:e.jsx(u,{children:s("profile.jobExperienceTitle")})}),e.jsx(x,{className:"space-y-4",children:a.jobExperiences?.length===0?e.jsx("p",{className:"text-muted-foreground text-sm",children:s("profile.noJobExperience")}):a.jobExperiences?.map(r=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsx(ce,{className:"h-5 w-5 text-primary flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-sm font-medium",children:[r.title," at ",r.company]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.startDate," - ",r.endDate||s("onboarding.current")]}),r.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r.description})]})]},r.id))})]}),e.jsxs(d,{children:[e.jsx(h,{children:e.jsx(u,{children:s("profile.studyExperienceTitle")})}),e.jsx(x,{className:"space-y-4",children:a.studyExperiences?.length===0?e.jsx("p",{className:"text-muted-foreground text-sm",children:s("profile.noStudyExperience")}):a.studyExperiences?.map(r=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsx(ne,{className:"h-5 w-5 text-primary flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-sm font-medium",children:[r.degree," at ",r.institution]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.startDate," - ",r.endDate||s("onboarding.current")]}),r.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r.description})]})]},r.id))})]}),e.jsxs(d,{children:[e.jsx(h,{children:e.jsx(u,{children:s("profile.servicesOfferedTitle")})}),e.jsx(x,{children:e.jsx("div",{className:"grid gap-4",children:a.servicesOffered?.length===0?e.jsx("p",{className:"text-muted-foreground text-sm",children:s("profile.noServicesOffered")}):a.servicesOffered?.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm",children:r.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.price})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{className:"h-3 w-3 fill-current text-yellow-500"}),e.jsx("span",{className:"text-xs",children:r.rating.toFixed(1)})]})})]},r.id))})})]}),e.jsxs(d,{children:[e.jsx(h,{children:e.jsx(u,{children:s("profile.certificationsTitle")})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-3",children:a.certifications?.length===0?e.jsx("p",{className:"text-muted-foreground text-sm",children:s("profile.noCertifications")}):a.certifications?.map(r=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx(oe,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm",children:r.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.issuer," • ",r.date]})]})]},r.id))})})]}),e.jsxs(d,{children:[e.jsxs(h,{children:[e.jsxs(u,{children:["Reviews for ",a.name]}),e.jsxs(he,{children:["What others say about working with ",a.name]})]}),e.jsx(x,{className:"space-y-4",children:a.reviews?.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(m,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:s("profile.noReviewsYet")}),e.jsx("p",{className:"text-sm",children:s("profile.noReviewsDesc")})]}):a.reviews?.map(r=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(O,{className:"h-10 w-10",children:e.jsx(J,{children:r.reviewerId.substring(0,2).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm",children:["User ",r.reviewerId.substring(0,8)]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Reviewed on ",new Date(r.createdAt).toLocaleDateString()]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[Array.from({length:r.rating}).map((l,C)=>e.jsx(m,{className:"h-3 w-3 fill-current text-yellow-500"},C)),Array.from({length:5-r.rating}).map((l,C)=>e.jsx(m,{className:"h-3 w-3 text-muted-foreground"},C))]})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.comment})]})]})},r.id))})]})]})]})})]})}export{Fe as PublicProfile};
//# sourceMappingURL=PublicProfile-CD26l76Q.js.map
