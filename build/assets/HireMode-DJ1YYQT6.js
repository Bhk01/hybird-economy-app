import{r as t,j as e,H as k,s as A,N as se,O as ae,Q as te,V as le,Y as ie,_ as re,$ as ne,a0 as ce,e as oe,U as N,J as b,F}from"./vendor-react-DTfwnz2i.js";import{N as de}from"./Navigation-DYALYri8.js";import{B as l,C as c,f as o,a as h}from"./badge-Bk34XC_J.js";import{I as p}from"./input-BMLotNza.js";import{T as me}from"./textarea-C2mIUScX.js";import{T as xe,a as he,b as Q,c as R}from"./tabs-V_RvRFQ7.js";import{D as pe,a as ue,b as ge,c as je,d as fe,e as Ne}from"./dialog-BD2p6u1S.js";import{L as u}from"./label-qGWvcckI.js";import{t as n}from"./vendor-ui-9zUGSSqf.js";import{b as be,j as I}from"./index-BR7N1bNZ.js";import"./vendor-Cgdd8BZB.js";import"./separator-Bu3GtbjQ.js";function Le({onNavigate:v}){const W=()=>{v("landing")},{user:r}=be(),[$,L]=t.useState("browse"),[d,Y]=t.useState(""),[w,_]=t.useState([]),[P,B]=t.useState(!0),[g,M]=t.useState(!1),[G,m]=t.useState(!1),[y,z]=t.useState(""),[C,E]=t.useState(""),[D,H]=t.useState(""),[q,O]=t.useState(""),[U,V]=t.useState(""),K=[{name:"Development",icon:le,count:0},{name:"Design",icon:ie,count:0},{name:"Photography",icon:re,count:0},{name:"Writing",icon:ne,count:0},{name:"Marketing",icon:ce,count:0},{name:"Business",icon:oe,count:0}];t.useEffect(()=>{J()},[]);const J=async()=>{try{B(!0);const s=await I.getAllJobs();_(s.jobs)}catch(s){console.error("Failed to load jobs:",s),n.error("Failed to load jobs")}finally{B(!1)}},X=async()=>{if(!r||!y||!C||!D){n.error("Please fill in all required fields");return}try{M(!0);const s=parseFloat(D);if(isNaN(s)||s<=0){n.error("Please enter a valid budget amount");return}await I.createJob({title:y,description:C,budget:s,deadline:q,skills:U.split(",").map(a=>a.trim()).filter(a=>a),employerId:r.id}),n.success("Job posted successfully!"),m(!1),z(""),E(""),H(""),O(""),V(""),J(),L("my-jobs")}catch(s){console.error("Failed to create job:",s),n.error("Failed to create job posting")}finally{M(!1)}},Z=async s=>{if(!r){n.error("Please log in to apply");return}try{await I.applyToJob(s,{freelancerId:r.id,proposal:"I am interested in this position and would like to discuss the requirements further."}),n.success("Application submitted successfully!"),J()}catch(a){console.error("Failed to apply to job:",a),n.error("Failed to submit application")}},T=w.filter(s=>s.title.toLowerCase().includes(d.toLowerCase())||s.description.toLowerCase().includes(d.toLowerCase())||s.skills.some(a=>a.toLowerCase().includes(d.toLowerCase()))),j=w.filter(s=>s.employerId===r?.id),f=w.filter(s=>s.applicants.some(a=>a.freelancerId===r?.id)),S=s=>{const a=new Date,i=new Date(s),x=Math.floor((a.getTime()-i.getTime())/(1e3*60*60));return x<1?"Just posted":x<24?`${x}h ago`:x<168?`${Math.floor(x/24)}d ago`:i.toLocaleDateString()},ee=s=>{switch(s){case"completed":return"text-green-500 bg-green-500/10";case"in-progress":return"text-blue-500 bg-blue-500/10";default:return"text-yellow-500 bg-yellow-500/10"}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(de,{currentPage:"hire",onNavigate:v,onLogout:W}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl mb-2",children:"Hire Mode"}),e.jsx("p",{className:"text-muted-foreground",children:"Find skilled professionals for your projects or browse available opportunities"})]}),e.jsxs(pe,{open:G,onOpenChange:m,children:[e.jsx(ue,{asChild:!0,children:e.jsxs(l,{className:"gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"Post a Job"]})}),e.jsxs(ge,{className:"max-w-2xl",children:[e.jsxs(je,{children:[e.jsx(fe,{children:"Post a New Job"}),e.jsx(Ne,{children:"Create a detailed job posting to find the right professional"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"job-title",children:"Job Title*"}),e.jsx(p,{id:"job-title",placeholder:"e.g., Website Development, Logo Design...",value:y,onChange:s=>z(s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"budget",children:"Budget (TND)*"}),e.jsx(p,{id:"budget",type:"number",placeholder:"e.g., 500",value:D,onChange:s=>H(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"deadline",children:"Deadline"}),e.jsx(p,{id:"deadline",type:"date",value:q,onChange:s=>O(s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"description",children:"Job Description*"}),e.jsx(me,{id:"description",placeholder:"Describe your project requirements, deliverables, and any specific skills needed...",rows:4,value:C,onChange:s=>E(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"skills",children:"Required Skills (comma-separated)"}),e.jsx(p,{id:"skills",placeholder:"e.g., React, Photoshop, Content Writing...",value:U,onChange:s=>V(s.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(l,{variant:"outline",onClick:()=>m(!1),disabled:g,children:"Cancel"}),e.jsxs(l,{onClick:X,disabled:g,className:"gap-2",children:[g?e.jsx(A,{className:"h-4 w-4 animate-spin"}):e.jsx(se,{className:"h-4 w-4"}),g?"Posting...":"Post Job"]})]})]})]})]})]}),e.jsxs(xe,{value:$,onValueChange:s=>L(s),children:[e.jsxs(he,{children:[e.jsx(Q,{value:"browse",children:"Browse Jobs"}),e.jsx(Q,{value:"my-jobs",children:"My Jobs"})]}),e.jsxs(R,{value:"browse",className:"space-y-6",children:[e.jsx(c,{children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(p,{placeholder:"Search jobs, skills, or keywords...",value:d,onChange:s=>Y(s.target.value),className:"pl-10"})]}),e.jsxs(l,{variant:"outline",className:"gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Filters"]})]})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg mb-4",children:"Browse by Category"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:K.map((s,a)=>{const i=s.icon;return e.jsx(c,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx(i,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-sm",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.count," jobs"]})]})},a)})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg",children:"Available Jobs"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.length," jobs found"]})]}),P?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(A,{className:"h-8 w-8 animate-spin"})}):T.length===0?e.jsx(c,{children:e.jsxs(o,{className:"p-8 text-center",children:[e.jsx(N,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg mb-2",children:"No jobs found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:d?"Try different search terms or clear filters.":"Be the first to post a job!"}),!d&&e.jsxs(l,{onClick:()=>m(!0),className:"gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"Post the First Job"]})]})}):T.map(s=>e.jsx(c,{className:"hover:shadow-md transition-shadow",children:e.jsxs(o,{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg",children:s.title}),e.jsx(h,{variant:"secondary",className:"text-xs",children:s.status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"h-4 w-4"}),S(s.createdAt)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"h-4 w-4"}),s.applicants.length," applicant",s.applicants.length!==1?"s":""]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.skills.map((a,i)=>e.jsx(h,{variant:"outline",className:"text-xs",children:a},i))})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(F,{className:"h-4 w-4"}),s.budget," TND"]}),s.deadline&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"h-4 w-4"}),"Due ",new Date(s.deadline).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>Z(s.id),disabled:s.applicants.some(a=>a.freelancerId===r?.id),children:s.applicants.some(a=>a.freelancerId===r?.id)?"Applied":"Apply Now"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>v("publicProfile",s.employerId),children:"View Employer"})]})]})]})},s.id))]})]}),e.jsx(R,{value:"my-jobs",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg",children:"My Job Postings"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[j.length," active posting",j.length!==1?"s":""]})]}),P?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(A,{className:"h-8 w-8 animate-spin"})}):j.length===0?e.jsx(c,{children:e.jsxs(o,{className:"p-8 text-center",children:[e.jsx(N,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg mb-2",children:"No job postings yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first job posting to start hiring talented professionals."}),e.jsxs(l,{onClick:()=>m(!0),className:"gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"Post Your First Job"]})]})}):j.map(s=>e.jsx(c,{children:e.jsxs(o,{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg",children:s.title}),e.jsx(h,{className:ee(s.status),children:s.status.replace("-"," ")})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"h-4 w-4"}),"Posted ",S(s.createdAt)]}),e.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(F,{className:"h-4 w-4"}),s.budget," TND"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"h-4 w-4"}),s.applicants.length," applicant",s.applicants.length!==1?"s":""]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.skills.map((a,i)=>e.jsx(h,{variant:"outline",className:"text-xs",children:a},i))})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:s.deadline&&e.jsxs("span",{children:["Deadline: ",new Date(s.deadline).toLocaleDateString()]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",children:"Edit"}),e.jsx(l,{variant:"outline",size:"sm",children:"View Applicants"}),s.applicants.length>0&&s.status==="open"&&e.jsx(l,{size:"sm",children:"Select Freelancer"})]})]})]})},s.id)),f.length>0&&e.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg",children:"Jobs I Applied To"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.length," application",f.length!==1?"s":""]})]}),f.map(s=>{const a=s.applicants.find(i=>i.freelancerId===r?.id);return e.jsx(c,{children:e.jsx(o,{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg",children:s.title}),e.jsx(h,{variant:"secondary",className:"text-xs",children:"Applied"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"h-4 w-4"}),"Applied ",S(a?.appliedAt||s.createdAt)]}),e.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(F,{className:"h-4 w-4"}),s.budget," TND"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})})})},s.id)})]})]})})]})]})]})}export{Le as HireMode};
//# sourceMappingURL=HireMode-DJ1YYQT6.js.map
